{% extends "website/default.html" %}

{% block title %} {{ block.super }} - Event {% endblock %}

{% block content %}
  {{ block.super }}
<div class="container">
  <div class="header">
      <h1 class="title">{{ event.name }}</h1>
  </div>
  {% if perms.website.change_event %}
    <a href="{% url 'website:assign_volunteers' slug=event.slug event_id=event.pk %}" class="event-button"><i class="fas fa-users"></i> Available Volunteers</a>
  {% endif %}
  <div class="event-detail-card">
    <div class="event-card-container">
      {% if user.is_staff %}
        <p>
          <a class="event-button"
            href="{% url 'website:workshop_create' slug=event.slug event_id=event.pk %}">
            <i class="fas fa-calendar-plus"></i> Create Workshop</a>
          <a class="event-button"
            href="{% url 'website:volunteer_email_preview' slug=event.slug pk=event.pk %}">
            <i class="fas fa-envelope-open"></i> Send status email</a>
        </p>
      {% endif %}
      <h3 class="event-detail">Event Details</h3>
      <p>
        <b>Start date: </b>{{ event.start_date }}<br>
        <b>Finish date: </b>{{ event.finish_date}}<br>
        <b>Prerequisites: </b>{{ event.prerequisite }}<br>
      </p>

      <h3 class="event-detail">Description</h3>
      <p>{{ event.description }}</p>

      <h3 class="event-detail">Workshop Schedule</h3>
      <table class="table">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Workshop Name</th>
              <th scope="col">Time</th>
              <th scope="col">Date</th>
              <th scope="col">Location</th>
            </tr>
          </thead>
      {% if workshops %}
        {% for workshop in workshops %}
            <tbody>
              <tr class="table-active">
                <td>{{ workshop.name }}</td>
                <td>{{ workshop.start_time }} - {{ workshop.end_time }}</td>
                <td>{{ workshop.date }}</td>
                <td>{{ workshop.location }}</td>
              </tr>
            </tbody>
        {% endfor %}
      {% else %}
      <p>To be confirmed</p>
      {% endif %}
      </table>
      <a class="btn btn-outline-warning" href="{% url 'website:registration' slug=event.slug event_id=event.pk%}" role="button"><i class="fas fa-rocket"></i> Express interest</a>
    </div>
  </div>
</div>
{% endblock %}
